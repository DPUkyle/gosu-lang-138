plugins {
    id 'java'
}

repositories {
    jcenter()
}

dependencies {
    compile 'junit:junit:4.12'
}

jar {
    Map<String, String> cp = [:]
    cp.put java.util.jar.Attributes.Name.CLASS_PATH.toString(), convertFileCollectionToURIs(configurations.compile)

    manifest.attributes cp
}

private String convertFileCollectionToURIs(FileCollection files) {
    List<String> entries = []

    //noinspection Convert2streamapi
    for(File entry : files) {
        logger.info('Encoding ' + entry.getAbsolutePath())
        entries.add(entry.toURI().toString())
    }

    return String.join(' ', entries)
}